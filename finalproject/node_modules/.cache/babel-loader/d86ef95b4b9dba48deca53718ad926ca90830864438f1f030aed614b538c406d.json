{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  arrProducts: [],\n  currentProduct: null,\n  status: \"idle\",\n  postStatus: \"idle\"\n};\nexport const fetchAllProducts = createAsyncThunk('product/fetchAllProducts', async () => {\n  const res = await axios.get('http://localhost:4000/product');\n  return res.data;\n});\nexport const getProductById = createAsyncThunk('product/getProductById', async id => {\n  const res = await axios.get(`http://localhost:4000/product/${id}`);\n  return res.data;\n});\nexport const postProduct = createAsyncThunk('product/postProduct', async dataProduct => {\n  const res = await axios.post('http://localhost:4000/product', dataProduct);\n  return res.data;\n});\nexport const putProduct = createAsyncThunk('product/putProduct', async product => {\n  const res = await axios.put(`http://localhost:4000/product/${product.id}`, product);\n  return res.data;\n});\nexport const deleteProduct = createAsyncThunk('product/deleteProduct', async id => {\n  const res = await axios.delete(`http://localhost:4000/product/${id}`);\n  return id;\n});\nexport const ProductSlice = createSlice({\n  name: 'product',\n  initialState,\n  reducers: {\n    deleteProduct: (state, action) => {\n      state.arrProducts = state.arrProducts.filter(x => x.id !== action.payload);\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchAllProducts.fulfilled, (state, {\n      payload\n    }) => {\n      state.arrProducts = payload;\n      state.status = \"fulfilled\";\n    }).addCase(fetchAllProducts.pending, state => {\n      state.status = \"pending\";\n    }).addCase(fetchAllProducts.rejected, state => {\n      state.status = \"rejected\";\n    }).addCase(deleteProduct.fulfilled, (state, action) => {\n      state.arrProducts = state.arrProducts.filter(x => x.id !== action.payload);\n    }).addCase(putProduct.fulfilled, (state, action) => {\n      let index = state.arrProducts.findIndex(x => x.id === action.payload.id);\n      if (index !== -1) {\n        state.arrProducts[index] = action.payload;\n      }\n    });\n  }\n});\nexport default ProductSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","arrProducts","currentProduct","status","postStatus","fetchAllProducts","res","get","data","getProductById","id","postProduct","dataProduct","post","putProduct","product","put","deleteProduct","delete","ProductSlice","name","reducers","state","action","filter","x","payload","extraReducers","builder","addCase","fulfilled","pending","rejected","index","findIndex","reducer"],"sources":["C:/Users/שיפי וינגרטן/Pictures/Saved Pictures/סמינר/כיתה יד/תכנות/react/פרויקט/finalproject/src/components/features/Product/ProductSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\nconst initialState = {\r\n    arrProducts: [],\r\n    currentProduct: null,\r\n    status: \"idle\",\r\n    postStatus: \"idle\"\r\n};\r\n\r\nexport const fetchAllProducts = createAsyncThunk(\r\n    'product/fetchAllProducts',\r\n    async () => {\r\n        const res = await axios.get('http://localhost:4000/product');\r\n        return res.data;\r\n    }\r\n);\r\n\r\nexport const getProductById = createAsyncThunk(\r\n    'product/getProductById',\r\n    async (id) => {\r\n        const res = await axios.get(`http://localhost:4000/product/${id}`);\r\n        return res.data;\r\n    }\r\n);\r\n\r\nexport const postProduct = createAsyncThunk(\r\n    'product/postProduct',\r\n    async (dataProduct) => {\r\n        const res = await axios.post('http://localhost:4000/product', dataProduct);\r\n        return res.data;\r\n    }\r\n);\r\n\r\nexport const putProduct = createAsyncThunk(\r\n    'product/putProduct',\r\n    async (product) => {\r\n        const res = await axios.put(`http://localhost:4000/product/${product.id}`, product);\r\n        return res.data;\r\n    }\r\n);\r\n\r\nexport const deleteProduct = createAsyncThunk(\r\n    'product/deleteProduct',\r\n    async (id) => {\r\n        const res = await axios.delete(`http://localhost:4000/product/${id}`);\r\n        return id;\r\n    }\r\n);\r\n\r\nexport const ProductSlice = createSlice({\r\n    name: 'product',\r\n    initialState,\r\n    reducers: {\r\n        deleteProduct: (state, action) => {\r\n            state.arrProducts = state.arrProducts.filter(x => x.id !== action.payload);\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(fetchAllProducts.fulfilled, (state, { payload }) => {\r\n                state.arrProducts = payload;\r\n                state.status = \"fulfilled\";\r\n            })\r\n            .addCase(fetchAllProducts.pending, (state) => {\r\n                state.status = \"pending\";\r\n            })\r\n            .addCase(fetchAllProducts.rejected, (state) => {\r\n                state.status = \"rejected\";\r\n            })\r\n            .addCase(deleteProduct.fulfilled, (state, action) => {\r\n                state.arrProducts = state.arrProducts.filter(x => x.id !== action.payload);\r\n            })\r\n            .addCase(putProduct.fulfilled, (state, action) => {\r\n                let index = state.arrProducts.findIndex(x => x.id === action.payload.id);\r\n                if (index !== -1) {\r\n                    state.arrProducts[index] = action.payload;\r\n                }\r\n            });\r\n    }\r\n});\r\n\r\nexport default ProductSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}