{"ast":null,"code":"import { createSlice, nanoid, createAsyncThunk } from '@reduxjs/toolkit';\nimport { getProducts, getProductByIdA, postProductA, putProductA, deleteProductA } from './ProductApi';\nconst initialState = {\n  arrProducts: [],\n  currentproduct: null,\n  status: \"idle\",\n  poststatus: \"idle\"\n};\nexport const fetchAllProducts = createAsyncThunk('product/fetchAllProducts', async thunkAPI => {\n  const res = await getProducts();\n  return res;\n});\nexport const getProductById = createAsyncThunk('product/getProductById', async (id, thunkAPI) => {\n  const res = await getProductByIdA(id);\n  return res;\n});\nexport const postProduct = createAsyncThunk('product/postProduct', async dataProduct => {\n  const res = await postProductA(dataProduct);\n  return res;\n});\nexport const putProduct = createAsyncThunk('product/putProduct', async ({\n  id,\n  newProduct\n}, thunkAPI) => {\n  const res = await putProductA(id, newProduct);\n  return res;\n});\nexport const deleteProduct = createAsyncThunk('product/deleteProduct', async (id, thunkAPI) => {\n  const res = await deleteProductA(id);\n  return res;\n});\nexport const ProductSlice = createSlice({\n  name: 'product',\n  initialState,\n  reducers: {\n    // setAllProducts: (state, action) => {\n    //     state.arrProduct = action.payload\n    // },\n    // updateProduct: (state, action) => {\n    //     let index = state.arrProduct.findIndex(x => x.id === action.payload.id)\n    //     state.arrProduct.splice(index, 1, action.payload)\n    // },\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchAllProducts.fulfilled, (state, {\n      payload\n    }) => {\n      state.arrProducts = payload;\n      state.status = \"fullfilled\";\n    })\n    // You can chain calls, or have separate `builder.addCase()` lines each time\n    .addCase(fetchAllProducts.pending, (state, action) => {\n      state.status = \"pending\";\n    }).addCase(fetchAllProducts.rejected, (state, action) => {\n      state.status = \"rejected\";\n    }).addCase(deleteProduct.fulfilled, (state, action) => {\n      state.allProducts = state.allProducts.filter(x => x.id !== action.payload);\n    }).addCase(putProduct.fulfilled, (state, action) => {\n      let index = state.allProducts.findIndex(x => x.id === action.payload.id);\n      if (index !== -1) {\n        state.allProducts[index] = action.payload;\n      }\n    });\n\n    // .addCase(postProduct.rejected, (state, action) => {\n    //     state.poststatus = \"rejected\"\n    //     console.log(state.poststatus)\n    // })\n  }\n});\n\n// export const {  updateProduct } = ProductSlice.actions\n\nexport default ProductSlice.reducer;","map":{"version":3,"names":["createSlice","nanoid","createAsyncThunk","getProducts","getProductByIdA","postProductA","putProductA","deleteProductA","initialState","arrProducts","currentproduct","status","poststatus","fetchAllProducts","thunkAPI","res","getProductById","id","postProduct","dataProduct","putProduct","newProduct","deleteProduct","ProductSlice","name","reducers","extraReducers","builder","addCase","fulfilled","state","payload","pending","action","rejected","allProducts","filter","x","index","findIndex","reducer"],"sources":["C:/Users/שיפי וינגרטן/Pictures/Saved Pictures/סמינר/כיתה יד/תכנות/react/פרויקט/finalproject/src/components/features/Product/ProductSlice.js"],"sourcesContent":["import { createSlice, nanoid ,createAsyncThunk } from '@reduxjs/toolkit'\r\nimport { getProducts,getProductByIdA,postProductA,putProductA, deleteProductA } from './ProductApi'\r\n\r\nconst initialState = {\r\n    arrProducts: [],\r\n    currentproduct:null,\r\n    status: \"idle\",\r\n    poststatus: \"idle\"\r\n}\r\n\r\nexport const fetchAllProducts = createAsyncThunk(\r\n    'product/fetchAllProducts',\r\n    async (thunkAPI) => {\r\n        const res = await getProducts()\r\n        return res\r\n    },\r\n)\r\n\r\nexport const getProductById = createAsyncThunk(\r\n    'product/getProductById',\r\n    async (id,thunkAPI) => {\r\n        const res = await getProductByIdA(id)\r\n        return res\r\n    },\r\n)\r\n\r\nexport const postProduct = createAsyncThunk(\r\n    'product/postProduct',\r\n    async (dataProduct) => {\r\n        const res = await postProductA(dataProduct);\r\n        return res;\r\n    },\r\n)\r\n\r\nexport const putProduct = createAsyncThunk(\r\n    'product/putProduct',\r\n    async ({id,newProduct},thunkAPI) => {\r\n        const res = await putProductA(id,newProduct)\r\n        return res\r\n    },\r\n)\r\n\r\nexport const deleteProduct = createAsyncThunk(\r\n    'product/deleteProduct',\r\n    async (id,thunkAPI) => {\r\n        const res = await deleteProductA(id)\r\n        return res\r\n    },\r\n)\r\n\r\n\r\nexport const ProductSlice = createSlice({\r\n    name: 'product',\r\n    initialState,\r\n    reducers: {\r\n        // setAllProducts: (state, action) => {\r\n        //     state.arrProduct = action.payload\r\n        // },\r\n        // updateProduct: (state, action) => {\r\n        //     let index = state.arrProduct.findIndex(x => x.id === action.payload.id)\r\n        //     state.arrProduct.splice(index, 1, action.payload)\r\n        // },\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(fetchAllProducts.fulfilled, (state, { payload }) => {\r\n                state.arrProducts = payload\r\n                state.status = \"fullfilled\"\r\n            })\r\n            // You can chain calls, or have separate `builder.addCase()` lines each time\r\n            .addCase(fetchAllProducts.pending, (state, action) => {\r\n                state.status = \"pending\"\r\n            })\r\n            .addCase(fetchAllProducts.rejected, (state, action) => {\r\n                state.status = \"rejected\"\r\n            })\r\n            .addCase(deleteProduct.fulfilled, (state, action) => {\r\n                state.allProducts = state.allProducts.filter(x => x.id !== action.payload);\r\n            })\r\n\r\n            .addCase(putProduct.fulfilled, (state, action) => {\r\n                let index = state.allProducts.findIndex(x => x.id === action.payload.id);\r\n                if (index !== -1) {\r\n                    state.allProducts[index] = action.payload;\r\n                }\r\n            });\r\n\r\n            // .addCase(postProduct.rejected, (state, action) => {\r\n            //     state.poststatus = \"rejected\"\r\n            //     console.log(state.poststatus)\r\n            // })\r\n\r\n    },\r\n})\r\n\r\n\r\n// export const {  updateProduct } = ProductSlice.actions\r\n\r\nexport default ProductSlice.reducer"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}